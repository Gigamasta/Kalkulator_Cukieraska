<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kalkulacja WW">
    <title>Kalkulator Wƒôglowodan√≥w - Aleksander</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: env(safe-area-inset-bottom);
        }

        html, body, input, textarea, select {
            -webkit-user-scalable: no;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        input[type="text"], input[type="number"], textarea, select {
            -webkit-user-select: text;
            user-select: text;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: #ffffff;
        }

        /* Header */
        .app-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 16px env(safe-area-inset-top);
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .app-header h1 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .app-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            gap: 0;
            background: #f8f9fb;
            border-bottom: 1px solid #e0e0e0;
            flex-shrink: 0;
            overflow-x: auto;
            scroll-behavior: smooth;
        }

        .tab-button {
            flex: 1;
            min-width: 75px;
            padding: 10px 6px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 11px;
            font-weight: 500;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #f0f2ff;
        }

        /* Main content */
        .content-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
        }

        .tab-content {
            display: none;
            padding: 16px;
            min-height: 100%;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Guide Styles */
        .guide-section {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .guide-category {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .category-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 14px;
            font-weight: 700;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-header:active {
            opacity: 0.9;
        }

        .category-icon {
            font-size: 16px;
            margin-right: 8px;
        }

        .category-arrow {
            font-size: 14px;
            transition: transform 0.3s;
        }

        .guide-category.expanded .category-arrow {
            transform: rotate(180deg);
        }

        .category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .guide-category.expanded .category-content {
            max-height: 2000px;
        }

        .content-body {
            padding: 14px;
            font-size: 13px;
            line-height: 1.6;
            color: #333;
        }

        .decision-tree {
            background: #f8f9fb;
            border-left: 3px solid #667eea;
            padding: 10px;
            margin: 8px 0;
            border-radius: 4px;
        }

        .condition {
            font-weight: 600;
            color: #667eea;
            margin: 8px 0 4px 0;
        }

        .action {
            background: white;
            padding: 8px;
            border-radius: 4px;
            margin: 4px 0;
            border-left: 2px solid #28a745;
        }

        .warning {
            background: #fff3cd;
            border-left: 2px solid #ffc107;
            padding: 8px;
            margin: 8px 0;
            border-radius: 4px;
            font-size: 12px;
        }

        .danger {
            background: #f8d7da;
            border-left: 2px solid #dc3545;
            padding: 8px;
            margin: 8px 0;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .contact-box {
            background: #e7f3ff;
            border: 1px solid #667eea;
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            font-size: 12px;
        }

        .contact-box strong {
            display: block;
            margin-bottom: 4px;
            color: #667eea;
        }

        .cheatsheet {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            margin: 8px 0;
            font-size: 12px;
        }

        .cheatsheet-row {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .cheatsheet-row:last-child {
            border-bottom: none;
        }

        .cheatsheet-key {
            font-weight: 600;
            color: #667eea;
        }

        .cheatsheet-value {
            text-align: right;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .tab-button {
                font-size: 10px;
                min-width: 65px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="app-header">
            <h1>üíâ Kalkulator WW</h1>
            <p>Aleksander | Cukrzyca Typ 1</p>
        </div>

        <!-- Tabs -->
        <div class="tabs-container">
            <button class="tab-button active" data-tab="calculator">Kalkulator</button>
            <button class="tab-button" data-tab="products">Produkty</button>
            <button class="tab-button" data-tab="scanner">Skaner</button>
            <button class="tab-button" data-tab="guide">üìñ Poradnik</button>
        </div>

        <!-- Content -->
               <div class="content-area">
            <!-- KALKULATOR -->
            <div class="tab-content active" id="calculator">
                <div class="calculator-section">
                    <div class="add-meal-section">
                        <button class="add-meal-btn" onclick="openAddMealModal()">+ Dodaj Posi≈Çek</button>
                    </div>

                    <div id="meals-list" class="meals-list">
                        <div class="empty-state">
                            <div class="empty-state-icon">üçΩÔ∏è</div>
                            <div class="empty-state-text">Brak posi≈Çk√≥w. Dodaj sw√≥j pierwszy posi≈Çek!</div>
                        </div>
                    </div>

                    <div class="summary-box">
                        <div class="summary-row">
                            <span class="summary-label">Razem wƒôglowodan√≥w:</span>
                            <span class="summary-value" id="total-carbs">0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Ca≈Çkowita energia:</span>
                            <span class="summary-value" id="total-calories">0 kcal</span>
                        </div>
                    </div>

                    <!-- Bolus Calculator -->
                    <div class="bolus-section">
                        <div class="bolus-title">‚öôÔ∏è Kalkulator Bolusa</div>

                        <div class="input-group">
                            <label class="input-label">
                                Wska≈∫nik wƒôglowodan√≥w (Carb Ratio)
                                <span class="required">*</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="number" id="carb-ratio" placeholder="np. 12" step="0.5" inputmode="decimal" value="12">
                                <span style="font-size: 12px; color: #666;">g / j.i.</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">
                                Obecny poziom glukozy
                                <span class="required">*</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="number" id="current-glucose" placeholder="np. 120" step="1" inputmode="numeric" value="100">
                                <span style="font-size: 12px; color: #666;">mg/dl</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">
                                Cel poziomu glukozy
                                <span class="required">*</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="number" id="target-glucose" placeholder="np. 120" step="1" inputmode="numeric" value="120">
                                <span style="font-size: 12px; color: #666;">mg/dl</span>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">
                                ISF (Insulin Sensitivity Factor)
                                <span class="required">*</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="number" id="isf" placeholder="np. 50" step="1" inputmode="numeric" value="50">
                                <span style="font-size: 12px; color: #666;">mg/dl</span>
                            </div>
                        </div>

                        <div id="bolus-result" class="bolus-result" style="display: none;">
                            <div class="bolus-result-value" id="bolus-value">0</div>
                            <div class="bolus-result-label">jednostek insuliny</div>
                        </div>

                        <button class="btn-primary" style="margin-top: 12px;" onclick="calculateBolus()">Oblicz Bolus</button>
                    </div>
                </div>
            </div>

            <!-- PRODUKTY -->
            <div class="tab-content" id="products">
                <div class="products-header">
                    <div class="search-box">
                        <input type="text" id="search-products" placeholder="Szukaj produktu..." onkeyup="filterProducts()">
                    </div>
                    <select id="category-filter" class="filter-dropdown" onchange="filterProducts()">
                        <option value="">Wszystkie kategorie</option>
                    </select>
                    <select id="sort-products" class="sort-dropdown" onchange="sortProducts()">
                        <option value="date-desc">Najnowsze</option>
                        <option value="date-asc">Najstarsze</option>
                        <option value="name-asc">A ‚Üí Z</option>
                        <option value="name-desc">Z ‚Üí A</option>
                    </select>
                </div>

                <div class="add-product-section">
                    <button class="add-product-btn" onclick="openAddProductModal()">+ Dodaj Produkt</button>
                </div>

                <div id="products-list" class="products-list">
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <div class="empty-state-text">Brak produkt√≥w. Dodaj sw√≥j pierwszy produkt!</div>
                    </div>
                </div>
            </div>

            <!-- SKANER -->
            <div class="tab-content" id="scanner">
                <div class="scanner-section">
                    <div id="camera-info" class="camera-info" style="display: none;"></div>
                    
                    <div id="qr-reader"></div>

                    <div class="scanner-controls">
                        <button class="scanner-btn start-scanner" onclick="startScanner()">üì± Skanuj Kod</button>
                        <button class="scanner-btn stop-scanner" onclick="stopScanner()" style="display: none;" id="stop-scanner-btn">üõë Zatrzymaj</button>
                    </div>

                    <div id="scanner-result" class="result-display">
                        <div style="margin-bottom: 12px;">
                            <label class="form-label">Kod produktu (EAN)</label>
                            <input type="text" id="scanned-code" class="form-input" readonly>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label class="form-label">Nazwa produktu <span class="required">*</span></label>
                            <input type="text" id="scanned-name" class="form-input" placeholder="Nazwa produktu">
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label class="form-label">Wƒôglowodany <span class="required">*</span></label>
                            <div style="display: flex; gap: 8px;">
                                <input type="number" id="scanned-carbs" class="form-input" placeholder="Warto≈õƒá" inputmode="numeric" step="0.1">
                                <select id="scanned-unit" class="form-input" style="flex: 0.5;">
                                    <option value="g">g</option>
                                    <option value="ml">ml</option>
                                </select>
                            </div>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label class="form-label">Kategoria <span class="required">*</span></label>
                            <select id="scanned-category" class="form-input"></select>
                        </div>
                        <div style="margin-bottom: 12px;">
                            <label class="form-label">Notatki</label>
                            <textarea class="form-input" id="scanned-notes" placeholder="Dodatkowe informacje..."></textarea>
                        </div>
                        <div class="form-actions">
                            <button class="btn-primary" onclick="saveScannedProduct()">Zapisz Produkt</button>
                            <button class="btn-secondary" onclick="closeScannedProduct()">Anuluj</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal - Dodaj Posi≈Çek -->
    <div class="modal" id="add-meal-modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Dodaj Posi≈Çek</span>
                <button class="close-btn" onclick="closeAddMealModal()">‚úï</button>
            </div>
            <div class="modal-form">
                <div class="form-group">
                    <label class="form-label">Wybierz produkt <span class="required">*</span></label>
                    <select id="meal-product-select" class="form-input" onchange="updateProductDetails()"></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Ilo≈õƒá <span class="required">*</span></label>
                    <div class="input-wrapper">
                        <button class="qty-btn" onclick="decrementQty()">‚àí</button>
                        <input type="number" id="meal-quantity" class="form-input" placeholder="0" inputmode="numeric" step="1" value="100" style="text-align: center;">
                        <button class="qty-btn" onclick="incrementQty()">+</button>
                    </div>
                    <div id="meal-quantity-unit" style="font-size: 12px; color: #999; margin-top: 4px;">100 g</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Wƒôglowodany (wyliczone)</label>
                    <div style="font-size: 16px; font-weight: 700; color: #667eea; padding: 10px; background: #f0f2ff; border-radius: 8px;" id="meal-carbs-preview">0 g</div>
                </div>
                <div class="form-group">
                    <label class="form-label">Notatki</label>
                    <textarea class="form-input" id="meal-notes" placeholder="Np. bez cukru, ze s≈Çodzikiem..."></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn-primary" onclick="saveMeal()">Dodaj do Kalkulatora</button>
                    <button class="btn-secondary" onclick="closeAddMealModal()">Anuluj</button>
                </div>
            </div>

            <!-- PORADNIK -->
            <div class="tab-content" id="guide">
                <div class="guide-section">
                    <!-- EMERGENCY CONTACTS -->
                    <div class="guide-category expanded">
                        <div class="category-header">
                            <span><span class="category-icon">üìû</span>Kontakt Z Zespo≈Çem Medycznym</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <div class="contact-box">
                                    <strong>üö® POGOTOWIE RATUNKOWE</strong>
                                    <strong style="color: red;">999</strong>
                                    <small>Wywo≈Çaj natychmiast je≈õli:</small>
                                    <ul style="margin-top: 4px; margin-left: 14px;">
                                        <li>Aleksander jest nieprzytomny</li>
                                        <li>Drgawki lub zaburzenia ≈õwiadomo≈õci</li>
                                        <li>Ciƒô≈ºki oddech (Kussmaula)</li>
                                        <li>Zapach acetonu z ust</li>
                                        <li>Nasilone wymioty</li>
                                    </ul>
                                </div>

                                <div class="contact-box">
                                    <strong>üë®‚Äç‚öïÔ∏è Lekarz Diabetolog (dzisiaj)</strong>
                                    <small>Nr telefonicny: _____________</small>
                                </div>

                                <div class="contact-box">
                                    <strong>üè• Poradnia Diabetologiczna</strong>
                                    <small>Nr telefonicny: _____________</small>
                                </div>

                                <div class="contact-box">
                                    <strong>üîß Serwis Pompy Insulinowej</strong>
                                    <small>Nr telefonicny: _____________</small>
                                </div>

                                <div class="warning">
                                    ‚ö†Ô∏è <strong>Zawsze miej pod rƒôkƒÖ zapisane wszystkie numery!</strong> Nie polegaj tylko na telefonie - mogƒÖ siƒô roz≈Çadowaƒá baterie lub brak sieci.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CHEAT SHEET -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">‚ö°</span>Szybka ≈öciƒÖga</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <strong style="color: #667eea;">Poziomy Glukozy (mg/dl):</strong>
                                <div class="cheatsheet">
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">&lt;55</span>
                                        <span class="cheatsheet-value">üî¥ HIPOGLIKEMIA - Ratuj!</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">55-70</span>
                                        <span class="cheatsheet-value">üü† Ni≈ºka - Obserwuj</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">70-150</span>
                                        <span class="cheatsheet-value">üü¢ NORMA</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">150-200</span>
                                        <span class="cheatsheet-value">üü° Wysoka</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">&gt;250</span>
                                        <span class="cheatsheet-value">üî¥ Bardzo wysoka</span>
                                    </div>
                                </div>

                                <strong style="color: #667eea; margin-top: 12px; display: block;">Obliczenia Bolusa:</strong>
                                <div class="cheatsheet">
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">ICR (Carb Ratio)</span>
                                        <span class="cheatsheet-value">1 j.i. : ?? g WW</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">ISF</span>
                                        <span class="cheatsheet-value">1 j.i. zni≈ºa o ?? mg/dl</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">Cel glukozy</span>
                                        <span class="cheatsheet-value">?? mg/dl</span>
                                    </div>
                                </div>

                                <strong style="color: #667eea; margin-top: 12px; display: block;">Przy Hipoglikemii (&lt;70):</strong>
                                <div class="cheatsheet">
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">Szybkie WW</span>
                                        <span class="cheatsheet-value">4-5g (sok, cukier)</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">Czekaj</span>
                                        <span class="cheatsheet-value">15 minut</span>
                                    </div>
                                    <div class="cheatsheet-row">
                                        <span class="cheatsheet-key">Zmierz ponownie</span>
                                        <span class="cheatsheet-value">Glukometr</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- NISKA GLUKOZA - POMPA -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">üî¥</span>Niska Glukoza (Pompa)</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli Aleksander ma glukozƒô &lt;70 mg/dl:</div>
                                    <div class="action">1Ô∏è‚É£ <strong>Zmierz ponownie</strong> - upewnij siƒô (mogƒÖ byƒá b≈Çƒôdy pomiaru)</div>
                                    <div class="action">2Ô∏è‚É£ <strong>Podaj szybkie wƒôglowodany:</strong> 4-5g
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Sok 100ml</li>
                                            <li>Nap√≥j z cukrem</li>
                                            <li>Tabletka glukozy (Dextro)</li>
                                            <li>Mi√≥d (1 ≈Çy≈ºeczka)</li>
                                        </ul>
                                    </div>
                                    <div class="action">3Ô∏è‚É£ <strong>Czekaj 15 minut</strong> - pozw√≥l wƒôglowodanom siƒô zaabsorbowaƒá</div>
                                    <div class="action">4Ô∏è‚É£ <strong>Zmierz ponownie:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Je≈õli &gt;100: OK, koniec</li>
                                            <li>Je≈õli &lt;70: Powt√≥rz kroki 2-4</li>
                                            <li>Je≈õli dalej pada: Wezwij 999</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli Aleksander jest NIEPRZYTOMNY:</div>
                                    <div class="danger">üö® WEZWIJ 999 NATYCHMIAST!</div>
                                    <div class="action">‚Ä¢ Nie podawaj nic przez usta</div>
                                    <div class="action">‚Ä¢ Podaj glukagon (je≈õli posiadasz)</div>
                                    <div class="action">‚Ä¢ Po≈Ç√≥≈º w pozycji bocznej bezpiecznej</div>
                                    <div class="action">‚Ä¢ Sprawdzaj oddech do przybycia pogotowia</div>
                                </div>

                                <div class="warning">
                                    ‚ö†Ô∏è <strong>NIGDY nie suspenduuj pompy</strong> w obawie o hipoglikemiƒô. Mo≈ºe to prowadziƒá do hiperglikemii i kwasicy!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- WYSOKA GLUKOZA - POMPA -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">üü°</span>Wysoka Glukoza (Pompa)</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli Aleksander ma glukozƒô 150-250 mg/dl:</div>
                                    <div class="action">1Ô∏è‚É£ <strong>Zmierz ketony</strong> - paski ketonowe w moczu lub krwi</div>
                                    <div class="action">2Ô∏è‚É£ <strong>Je≈õli BRAK keton√≥w:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Podaj korekcyjnƒÖ insulinƒô (z pompy lub pena)</li>
                                            <li>Daj piƒá du≈ºo wody</li>
                                            <li>Czekaj 2-3 godziny</li>
                                            <li>Zmierz ponownie</li>
                                        </ul>
                                    </div>
                                    <div class="action">3Ô∏è‚É£ <strong>Je≈õli ≈öLADY keton√≥w:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Zwiƒôksz insulinƒô na 10-20% dawki dobowej</li>
                                            <li>Podaj z pena (nie z pompy!)</li>
                                            <li>Daj wodƒô z cytrynƒÖ</li>
                                            <li>Zmierz ketony za 2h</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli Aleksander ma glukozƒô &gt;250 mg/dl PLUS ketony:</div>
                                    <div class="danger">üö® PODEJRZENIE DKA - WEZWIJ 999!</div>
                                    <div class="action">‚Ä¢ Objawy: wymioty, b√≥l brzucha, oddech przyspieszony</div>
                                    <div class="action">‚Ä¢ Zapach acetonu z ust</div>
                                    <div class="action">‚Ä¢ TO STAN ZAGRA≈ªAJƒÑCY ≈ªYCIU</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AWARIA POMPY -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">üîß</span>Awaria Pompy</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli pompa wy≈õwietla ALARM:</div>
                                    <div class="action">1Ô∏è‚É£ <strong>Przeczytaj kod alarmu</strong> w podrƒôczniku pompy</div>
                                    <div class="action">2Ô∏è‚É£ <strong>Spr√≥buj rozwiƒÖzaƒá:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Sprawd≈∫ bateriƒô</li>
                                            <li>Sprawd≈∫ pojemnik (czy insulina siƒô nie sko≈Ñczy≈Ça)</li>
                                            <li>Sprawd≈∫ zestaw infuzyjny (czy nie wycieka)</li>
                                            <li>Zrestartuj pompƒô (wg instrukcji)</li>
                                        </ul>
                                    </div>
                                    <div class="action">3Ô∏è‚É£ <strong>Je≈õli to nie pomog≈Ço:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Wezwij producenta pompy (masz numer?)</li>
                                            <li>Przygotuj siƒô na przej≈õcie na peny</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli pompa siƒô ca≈Çkowicie zepsuje:</div>
                                    <div class="action">1Ô∏è‚É£ <strong>NATYCHMIAST przejd≈∫ na peny!</strong></div>
                                    <div class="action">2Ô∏è‚É£ <strong>Zwiƒôksz insulinƒô o 20-30%:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Baza (insulina d≈Çugo dzia≈ÇajƒÖca) o 20-30%</li>
                                            <li>Bolus do posi≈Çk√≥w o 20-30%</li>
                                        </ul>
                                    </div>
                                    <div class="action">3Ô∏è‚É£ <strong>Zmierz glukozƒô co 2-3 godziny</strong></div>
                                    <div class="action">4Ô∏è‚É£ <strong>Monitoruj ketony</strong> - ryzyko DKA!</div>
                                    <div class="action">5Ô∏è‚É£ <strong>Skontaktuj siƒô z diabetologiem</strong> - zmiana schematu</div>
                                </div>

                                <div class="warning">
                                    ‚ö†Ô∏è <strong>Zawsze miej w lod√≥wce zapasowƒÖ fiolkƒô insuliny bazowej!</strong> Na wypadek awarii pompy.
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- INFEKCJA/CHOROBA -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">ü§í</span>Infekcja / Choroba</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <div class="decision-tree">
                                    <div class="condition">‚ÑπÔ∏è Je≈õli Aleksander zachoruje (gorƒÖczka, kaszl, biegunka):</div>
                                    <div class="action">1Ô∏è‚É£ <strong>ZAWSZE PODAWAJ INSULINƒò!</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>NIGDY nie przerywaj insuliny, nawet je≈õli nie je</li>
                                            <li>Organizm potrzebuje insuliny do walki z infekcjƒÖ</li>
                                        </ul>
                                    </div>
                                    <div class="action">2Ô∏è‚É£ <strong>Zmierz glukozƒô czƒô≈õciej:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Co 2-4 godziny (zamiast 3-4x dziennie)</li>
                                            <li>Prowad≈∫ dziennik pomiar√≥w</li>
                                        </ul>
                                    </div>
                                    <div class="action">3Ô∏è‚É£ <strong>Zwykle glukoza RO≈öNIE przy infekcji:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Zwiƒôksz insulinƒô o 10-50% (zale≈ºy od zapatrywania)</li>
                                            <li>Skonsultuj siƒô z diabetologiem</li>
                                        </ul>
                                    </div>
                                    <div class="action">4Ô∏è‚É£ <strong>Dbaj o nawodnienie:</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Du≈ºo napoj√≥w (woda, czaj)</li>
                                            <li>Czasem s≈Çabsza herbacie ze cukrem</li>
                                        </ul>
                                    </div>
                                    <div class="action">5Ô∏è‚É£ <strong>Monitoruj ketony (bardzo wa≈ºne!):</strong>
                                        <ul style="margin: 4px 0 0 14px; font-size: 11px;">
                                            <li>Je≈õli ketony pojawiajƒÖ siƒô, ryzyko DKA</li>
                                            <li>BƒÖd≈∫ gotowy na szpital</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="warning">
                                    ‚ö†Ô∏è <strong>OSTRZE≈ªENIE:</strong> Kwasica ketonowa (DKA) BARDZO czƒôsto pojawia siƒô przy infekcji. BƒÖd≈∫ czujny na objawy!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PODSTAWOWE ZASADY -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">üìã</span>Podstawowe Zasady</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <strong>1. ZAWSZE Podawaj Insulinƒô</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Brak insuliny = Kwasica ketonowa w ciƒÖgu godzin</li>
                                    <li>Nawet je≈õli Aleksander nie je</li>
                                    <li>Nawet je≈õli ma hipoglikemiƒô (najpierw leczysz hipoglikemiƒô, potem insulina)</li>
                                </ul>

                                <strong>2. Mierz Glukozƒô Regularnie</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Przed posi≈Çkami (je≈õli mo≈ºesz)</li>
                                    <li>2 godziny po posi≈Çkach</li>
                                    <li>Przed snem</li>
                                    <li>W nocy (szczeg√≥lnie je≈õli ma hipoglikemiƒô)</li>
                                </ul>

                                <strong>3. Obserwuj Zmiany Zapatrywania</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Ma≈Çy maluch rozwija siƒô szybko</li>
                                    <li>Zapotrzebowanie na insulinƒô ro≈õnie</li>
                                    <li>Co miesiƒÖc mo≈ºe wymagaƒá zmian</li>
                                    <li>Regularnie konsultuj z diabetologiem</li>
                                </ul>

                                <strong>4. Dieta = Obliczanie Wƒôglowodan√≥w</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Nie ma zakazanych produkt√≥w</li>
                                    <li>Wszystko mo≈ºna, trzeba tylko obliczyƒá</li>
                                    <li>U≈ºywaj aplikacji (KalkulatorWW) do liczenia</li>
                                </ul>

                                <strong>5. Edukacja Rodziny</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Babcia, dziadek, opiekunowie - muszƒÖ wiedzieƒá</li>
                                    <li>Sytuacje awaryjne mogƒÖ zaj≈õƒá wszƒôdzie</li>
                                    <li>Wszyscy powinni wiedzieƒá: gdzie insulina, jak mierzyƒá glukozƒô, co robiƒá przy hipoglikemii</li>
                                </ul>

                                <strong>6. Psychika Dziecka</strong>
                                <ul style="margin: 4px 0 12px 14px; font-size: 12px;">
                                    <li>Cukrzyca to nie kara</li>
                                    <li>Aleksander jest normalnym dzieckiem</li>
                                    <li>Mo≈ºe je≈õƒá, bawi≈Ça siƒô, biegaƒá jak inne dzieci</li>
                                    <li>Twoja spokojno≈õƒá = jego spokojno≈õƒá</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- OBLICZANIE PARAMETR√ìW -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">üßÆ</span>Obliczanie Parametr√≥w</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body">
                                <strong>ICR (Insulin-to-Carb Ratio / Carb Ratio):</strong>
                                <div style="background: #f8f9fb; padding: 8px; border-radius: 4px; margin: 4px 0; font-size: 12px;">
                                    <strong>Formu≈Ça:</strong> 500 √∑ Dobowe Zapotrzebowanie Insuliny (DDI)<br/>
                                    <strong>Przyk≈Çad:</strong> Je≈õli Aleksander za≈ºywa 20 j.i./dzie≈Ñ<br/>
                                    500 √∑ 20 = 25 ‚Üí 1 j.i. pokrywa 25g wƒôglowodan√≥w
                                </div>

                                <strong style="display: block; margin-top: 8px;">ISF (Insulin Sensitivity Factor):</strong>
                                <div style="background: #f8f9fb; padding: 8px; border-radius: 4px; margin: 4px 0; font-size: 12px;">
                                    <strong>Formu≈Ça:</strong> 1800 √∑ Dobowe Zapotrzebowanie Insuliny (DDI)<br/>
                                    <strong>Przyk≈Çad:</strong> Je≈õli Aleksander za≈ºywa 20 j.i./dzie≈Ñ<br/>
                                    1800 √∑ 20 = 90 ‚Üí 1 j.i. zni≈ºa glukozƒô o 90 mg/dl
                                </div>

                                <strong style="display: block; margin-top: 8px;">DDI (Dobowe Zapotrzebowanie Insuliny):</strong>
                                <div style="background: #f8f9fb; padding: 8px; border-radius: 4px; margin: 4px 0; font-size: 12px;">
                                    <strong>Dla niemowlƒÖt poni≈ºej roku:</strong> 0.5-1.0 j.i./kg masy cia≈Ça<br/>
                                    <strong>Przyk≈Çad:</strong> Aleksander wa≈ºy 10 kg<br/>
                                    10 kg √ó 0.7 = 7 j.i./dzie≈Ñ (≈õrednio)<br/>
                                    <strong>‚ö†Ô∏è To wy≈ÇƒÖcznie szacunkowa warto≈õƒá!</strong> Zawsze s≈Çuchaj lekarza.
                                </div>

                                <div class="warning" style="margin-top: 12px;">
                                    ‚ö†Ô∏è Wszystkie parametry sƒÖ INDYWIDUALNE dla Aleksandra. Zawsze konsultuj zmianƒô z diabetologiem!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ABOUT -->
                    <div class="guide-category">
                        <div class="category-header">
                            <span><span class="category-icon">‚ÑπÔ∏è</span>O Poradniku</span>
                            <span class="category-arrow">‚ñº</span>
                        </div>
                        <div class="category-content">
                            <div class="content-body" style="font-size: 12px;">
                                <p>Poradnik ten zosta≈Ç stworzony na bazie rzeczywistej wiedzy medycznej i wytycznych miƒôdzynarodowych dla zarzƒÖdzania cukrzycƒÖ typu 1 u dzieci poni≈ºej roku ≈ºycia.</p>

                                <p style="margin-top: 8px;"><strong>‚ö†Ô∏è WA≈ªNE:</strong> Ten poradnik wspomaga Twoje decyzje, ale NIGDY nie zastƒôpuje porad lekarza. Zawsze konsultuj wszystkie wƒÖtpliwo≈õci z zespo≈Çem diabetologicznym Aleksandra.</p>

                                <p style="margin-top: 8px;"><strong>Wersja:</strong> 1.0 | <strong>Data:</strong> Listopad 2025</p>

                                <p style="margin-top: 8px;"><strong>Dedykacja:</strong> Dla Aleksandra i jego rodziny. ≈ªyczƒô Wam si≈Çy, cierpliwo≈õci i wielu szczƒô≈õliwych dni razem.</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const tabName = e.target.dataset.tab;
                switchTab(tabName);
            });
        });

        function switchTab(tabName) {
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.querySelector(`#${tabName}`).classList.add('active');
        }

        // Category toggle
        document.querySelectorAll('.category-header').forEach(header => {
            header.addEventListener('click', function() {
                this.closest('.guide-category').classList.toggle('expanded');
            });
        });
    </script>
</body>
</html>
